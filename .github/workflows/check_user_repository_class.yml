name: check-user-repository-class-use
on: [pull_request]

jobs:
  get-changed-files:
    runs-on: ubuntu-latest
    name: 'Process changed files'
    steps:
      - uses: actions/checkout@v3
        with:
          fetch-depth: 0
      - name: Check for UserRepository class use
        run: |
          diff=$(git diff origin/main origin/${GITHUB_HEAD_REF})
          a=$(echo "$diff" | (grep -E '^\+'))
          b=$(echo "$a" | (grep -E '(^|\s|\.|\+)UserRepository(\s|$|;))'))
          echo $a
          echo '================'
          echo $b